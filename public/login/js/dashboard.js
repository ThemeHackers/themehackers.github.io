const _0xddaa1e=_0x5b8c;(function(_0x3611b2,_0x4be3f8){const _0x4c1dd5=_0x5b8c,_0x3b07a8=_0x3611b2();while(!![]){try{const _0x59cf6a=parseInt(_0x4c1dd5(0x182))/0x1*(-parseInt(_0x4c1dd5(0x128))/0x2)+parseInt(_0x4c1dd5(0x188))/0x3*(-parseInt(_0x4c1dd5(0x145))/0x4)+-parseInt(_0x4c1dd5(0x18d))/0x5+-parseInt(_0x4c1dd5(0x13b))/0x6*(-parseInt(_0x4c1dd5(0x132))/0x7)+-parseInt(_0x4c1dd5(0x16d))/0x8*(parseInt(_0x4c1dd5(0x140))/0x9)+parseInt(_0x4c1dd5(0x122))/0xa*(-parseInt(_0x4c1dd5(0x19f))/0xb)+parseInt(_0x4c1dd5(0x12a))/0xc;if(_0x59cf6a===_0x4be3f8)break;else _0x3b07a8['push'](_0x3b07a8['shift']());}catch(_0x91af1c){_0x3b07a8['push'](_0x3b07a8['shift']());}}}(_0x316b,0x24646));const SUPABASE_URL=window['ENV']?.[_0xddaa1e(0x197)],SUPABASE_ANON_KEY=window[_0xddaa1e(0x168)]?.[_0xddaa1e(0x156)],REDIRECT_TO=window[_0xddaa1e(0x168)]?.[_0xddaa1e(0x11f)]||window[_0xddaa1e(0x191)][_0xddaa1e(0x134)]+_0xddaa1e(0x13d);if(!SUPABASE_URL||!SUPABASE_ANON_KEY){alert('Supabase\x20environment\x20variables\x20are\x20not\x20set.\x20Please\x20check\x20your\x20Netlify\x20configuration.');throw new Error(_0xddaa1e(0x1ad));}const supabase=window[_0xddaa1e(0x15d)][_0xddaa1e(0x130)](SUPABASE_URL,SUPABASE_ANON_KEY);async function getUserAndProfile(){const _0x4f56c2=_0xddaa1e;try{const {data:{user:_0x5aff1e},error:_0x1bf869}=await supabase['auth'][_0x4f56c2(0x14e)]();if(_0x1bf869||!_0x5aff1e){console[_0x4f56c2(0x15a)](_0x4f56c2(0x133)),window[_0x4f56c2(0x191)][_0x4f56c2(0x19d)]=_0x4f56c2(0x186);return;}const {data:{session:_0x5497c9},error:_0x4ac8c0}=await supabase[_0x4f56c2(0x17e)][_0x4f56c2(0x152)]();if(_0x4ac8c0||!_0x5497c9){console['log'](_0x4f56c2(0x174)),window[_0x4f56c2(0x191)]['href']=_0x4f56c2(0x186);return;}const _0x50b0a3=await getLatestProfileData(),_0x1a5b8e=document[_0x4f56c2(0x19c)]('user-name'),_0x6f2b5d=document[_0x4f56c2(0x19c)](_0x4f56c2(0x193)),_0x1e8295=_0x50b0a3?.['name']||_0x5aff1e[_0x4f56c2(0x151)]?.[_0x4f56c2(0x19b)]||_0x5aff1e[_0x4f56c2(0x1a4)];if(_0x6f2b5d)_0x6f2b5d[_0x4f56c2(0x177)]=_0x1e8295;else _0x1a5b8e&&(_0x1a5b8e[_0x4f56c2(0x177)]=_0x1e8295);document[_0x4f56c2(0x19c)](_0x4f56c2(0x143))['textContent']=_0x50b0a3?.['email']||_0x5aff1e[_0x4f56c2(0x1a4)],document['getElementById']('user-avatar')['src']=_0x50b0a3?.[_0x4f56c2(0x18c)]||_0x5aff1e[_0x4f56c2(0x151)]?.[_0x4f56c2(0x18c)]||_0x4f56c2(0x165);const _0x4d18c9=document[_0x4f56c2(0x19c)](_0x4f56c2(0x15c)),_0xdd5415=document[_0x4f56c2(0x19c)](_0x4f56c2(0x185)),_0x186a1f=document[_0x4f56c2(0x19c)]('phone-source');document[_0x4f56c2(0x19c)](_0x4f56c2(0x176))[_0x4f56c2(0x177)]=_0x50b0a3?.[_0x4f56c2(0x135)]||_0x5aff1e[_0x4f56c2(0x151)]?.['full_name']||_0x5aff1e['email'];if(_0x4d18c9){const _0x186439=!_0x50b0a3?.['user_id']||_0x50b0a3?.[_0x4f56c2(0x159)]===_0x5aff1e['id'];_0x4d18c9[_0x4f56c2(0x177)]=_0x50b0a3?.[_0x4f56c2(0x135)]&&_0x186439?'(Database)':_0x50b0a3?.[_0x4f56c2(0x135)]?_0x4f56c2(0x129):_0x4f56c2(0x1ab);}document['getElementById'](_0x4f56c2(0x146))[_0x4f56c2(0x177)]=_0x50b0a3?.[_0x4f56c2(0x1a4)]||_0x5aff1e[_0x4f56c2(0x1a4)];if(_0xdd5415){const _0x5d469c=!_0x50b0a3?.[_0x4f56c2(0x159)]||_0x50b0a3?.['user_id']===_0x5aff1e['id'];_0xdd5415['textContent']=_0x50b0a3?.[_0x4f56c2(0x1a4)]&&_0x5d469c?_0x4f56c2(0x129):_0x4f56c2(0x1ab);}const _0x44fb83=document['getElementById']('profile-detail-phone');_0x44fb83&&(_0x44fb83[_0x4f56c2(0x177)]=_0x50b0a3?.['phone']||'-');if(_0x186a1f){const _0xdf7309=!_0x50b0a3?.['user_id']||_0x50b0a3?.[_0x4f56c2(0x159)]===_0x5aff1e['id'];_0x186a1f['textContent']=_0x50b0a3?.[_0x4f56c2(0x15e)]&&_0xdf7309?_0x4f56c2(0x129):'-';}window[_0x4f56c2(0x1ae)]=_0x50b0a3;const _0x1ee147=document['getElementById'](_0x4f56c2(0x16f));if(_0x1ee147&&_0x5aff1e[_0x4f56c2(0x161)]){const _0x196ac0=new Date(_0x5aff1e['created_at']);_0x1ee147[_0x4f56c2(0x177)]=_0x196ac0[_0x4f56c2(0x149)]();}else _0x1ee147&&(_0x1ee147[_0x4f56c2(0x177)]='-');const _0x2e862c=document[_0x4f56c2(0x19c)](_0x4f56c2(0x155));if(_0x2e862c&&_0x5aff1e[_0x4f56c2(0x13c)]){const _0x8dc349=new Date(_0x5aff1e[_0x4f56c2(0x13c)]);_0x2e862c[_0x4f56c2(0x177)]=_0x8dc349[_0x4f56c2(0x149)]();}else _0x2e862c&&(_0x2e862c['textContent']='-');const _0xeec018=document[_0x4f56c2(0x19c)](_0x4f56c2(0x179));_0xeec018&&(_0x50b0a3&&_0x50b0a3[_0x4f56c2(0x135)]?(_0xeec018[_0x4f56c2(0x177)]=_0x4f56c2(0x1a7),_0xeec018[_0x4f56c2(0x12b)]=_0x4f56c2(0x162)):(_0xeec018[_0x4f56c2(0x177)]=_0x4f56c2(0x18a),_0xeec018[_0x4f56c2(0x12b)]=_0x4f56c2(0x123)));const _0x30b0c2=document[_0x4f56c2(0x19c)](_0x4f56c2(0x1a2));_0x30b0c2&&(_0x5aff1e[_0x4f56c2(0x13f)]===_0x4f56c2(0x1a3)?_0x30b0c2[_0x4f56c2(0x177)]='Account\x20is\x20protected':_0x30b0c2[_0x4f56c2(0x177)]=_0x5aff1e['role']||'-');}catch(_0x3882d2){console['error'](_0x4f56c2(0x183),_0x3882d2),window[_0x4f56c2(0x191)][_0x4f56c2(0x19d)]=_0x4f56c2(0x186);}}async function updateUserProfile(_0x16761c,_0x8c6b56){const _0x5826a1=_0xddaa1e;try{const {data:{session:_0x46f648},error:_0x40f5c1}=await supabase[_0x5826a1(0x17e)][_0x5826a1(0x152)]();if(_0x40f5c1||!_0x46f648)throw new Error('No\x20valid\x20session\x20found');const _0x3c9204=SUPABASE_URL+'/functions/v1/update-profiles',_0x338688=await fetch(_0x3c9204,{'method':_0x5826a1(0x12f),'headers':{'Content-Type':_0x5826a1(0x17b),'Authorization':_0x5826a1(0x14f)+_0x46f648[_0x5826a1(0x1a1)]},'body':JSON[_0x5826a1(0x19e)]({'name':_0x16761c,'phone':_0x8c6b56})});if(!_0x338688['ok']){const _0x5d4690=await _0x338688['json']();console['error'](_0x5826a1(0x136),_0x5d4690);throw new Error(_0x5d4690[_0x5826a1(0x1af)]||_0x5826a1(0x150));}const _0x4d5717=await _0x338688[_0x5826a1(0x124)]();return{'success':!![],'data':_0x4d5717[_0x5826a1(0x120)]};}catch(_0x1b6def){return console['error'](_0x5826a1(0x180),_0x1b6def),{'success':![],'error':_0x1b6def[_0x5826a1(0x187)]};}}async function updateUserProfileWithEdgeFunction(_0x11df87,_0x5e8713){const _0x1a05d9=_0xddaa1e;try{const {data:{session:_0x387f64},error:_0x4c75a3}=await supabase[_0x1a05d9(0x17e)]['getSession']();if(_0x4c75a3||!_0x387f64)throw new Error('No\x20valid\x20session\x20found');const _0x4258ed=await fetch(SUPABASE_URL+'/functions/v1/update-profile',{'method':_0x1a05d9(0x12f),'headers':{'Content-Type':_0x1a05d9(0x17b),'Authorization':_0x1a05d9(0x14f)+_0x387f64['access_token']},'body':JSON[_0x1a05d9(0x19e)]({'name':_0x11df87,'phone':_0x5e8713})});if(!_0x4258ed['ok']){const _0x4f97f7=await _0x4258ed['json']();throw new Error(_0x4f97f7[_0x1a05d9(0x1af)]||_0x1a05d9(0x150));}const _0x26283e=await _0x4258ed[_0x1a05d9(0x124)]();return{'success':!![],'data':_0x26283e[_0x1a05d9(0x120)]};}catch(_0x15e931){return console[_0x1a05d9(0x1af)](_0x1a05d9(0x180),_0x15e931),{'success':![],'error':_0x15e931['message']};}}async function updateUserProfileDirect(_0x3e35b3,_0x1fd067){const _0x208202=_0xddaa1e;try{const {data:{session:_0x505b3c},error:_0x46b248}=await supabase[_0x208202(0x17e)][_0x208202(0x152)]();if(_0x46b248||!_0x505b3c)throw new Error(_0x208202(0x1a0));const _0x40f9cc=SUPABASE_URL+_0x208202(0x153),_0x165848=await fetch(_0x40f9cc,{'method':_0x208202(0x12f),'headers':{'Content-Type':_0x208202(0x17b),'Authorization':_0x208202(0x14f)+_0x505b3c[_0x208202(0x1a1)]},'body':JSON[_0x208202(0x19e)]({'name':_0x3e35b3,'phone':_0x1fd067})});if(!_0x165848['ok']){const _0x147071=await _0x165848['json']();console['error'](_0x208202(0x136),_0x147071);throw new Error(_0x147071[_0x208202(0x1af)]||_0x208202(0x150));}const _0x21e003=await _0x165848[_0x208202(0x124)]();return console[_0x208202(0x15a)](_0x208202(0x199),_0x21e003),{'success':!![],'data':_0x21e003[_0x208202(0x120)]};}catch(_0x9e4a36){return console['error']('Error\x20updating\x20profile\x20via\x20Edge\x20Function:',_0x9e4a36),{'success':![],'error':_0x9e4a36[_0x208202(0x187)]};}}async function refreshProfileData(){const _0x5314c5=_0xddaa1e;try{const {data:{user:_0xc998e8},error:_0x3df7a8}=await supabase[_0x5314c5(0x17e)][_0x5314c5(0x14e)]();if(_0x3df7a8||!_0xc998e8)return console['log'](_0x5314c5(0x126)),null;const _0x45b6c3=await getLatestProfileData();if(!_0x45b6c3)return console[_0x5314c5(0x1af)](_0x5314c5(0x178)),null;const _0x19c569=document[_0x5314c5(0x19c)]('user-name'),_0x4cb4ce=document[_0x5314c5(0x19c)](_0x5314c5(0x193)),_0x54fdd5=_0x45b6c3[_0x5314c5(0x135)]||_0xc998e8[_0x5314c5(0x151)]?.[_0x5314c5(0x19b)]||_0xc998e8[_0x5314c5(0x1a4)];if(_0x4cb4ce)_0x4cb4ce[_0x5314c5(0x177)]=_0x54fdd5;else _0x19c569&&(_0x19c569[_0x5314c5(0x177)]=_0x54fdd5);document[_0x5314c5(0x19c)]('user-email')[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x1a4)]||_0xc998e8[_0x5314c5(0x1a4)],document[_0x5314c5(0x19c)](_0x5314c5(0x15f))[_0x5314c5(0x163)]=_0x45b6c3[_0x5314c5(0x18c)]||_0xc998e8[_0x5314c5(0x151)]?.[_0x5314c5(0x18c)]||_0x5314c5(0x165);const _0x3f2a66=document[_0x5314c5(0x19c)]('name-source'),_0x4dc169=document[_0x5314c5(0x19c)](_0x5314c5(0x185)),_0x56c982=document[_0x5314c5(0x19c)](_0x5314c5(0x164));document['getElementById'](_0x5314c5(0x176))['textContent']=_0x45b6c3['name']||_0xc998e8[_0x5314c5(0x151)]?.[_0x5314c5(0x19b)]||_0xc998e8['email'];if(_0x3f2a66){const _0x5d023f=!_0x45b6c3[_0x5314c5(0x159)]||_0x45b6c3['user_id']===_0xc998e8['id'];_0x3f2a66[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x135)]&&_0x5d023f?'(Database)':_0x45b6c3['name']?'(Database)':_0x5314c5(0x1ab);}document['getElementById']('profile-detail-email')[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x1a4)]||_0xc998e8[_0x5314c5(0x1a4)];if(_0x4dc169){const _0xc090d6=!_0x45b6c3[_0x5314c5(0x159)]||_0x45b6c3[_0x5314c5(0x159)]===_0xc998e8['id'];_0x4dc169[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x1a4)]&&_0xc090d6?_0x5314c5(0x129):_0x5314c5(0x1ab);}const _0x2eb20c=document[_0x5314c5(0x19c)](_0x5314c5(0x171));_0x2eb20c&&(_0x2eb20c[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x15e)]||'-');if(_0x56c982){const _0x5b337e=!_0x45b6c3[_0x5314c5(0x159)]||_0x45b6c3[_0x5314c5(0x159)]===_0xc998e8['id'];_0x56c982[_0x5314c5(0x177)]=_0x45b6c3[_0x5314c5(0x15e)]&&_0x5b337e?_0x5314c5(0x129):'-';}return window[_0x5314c5(0x1ae)]=_0x45b6c3,_0x45b6c3;}catch(_0x11f48d){return console[_0x5314c5(0x1af)](_0x5314c5(0x173),_0x11f48d),null;}}async function getLatestProfileData(){const _0x27ae05=_0xddaa1e;try{const {data:{user:_0x5f6975},error:_0x160945}=await supabase[_0x27ae05(0x17e)][_0x27ae05(0x14e)]();if(_0x160945||!_0x5f6975)return console[_0x27ae05(0x15a)](_0x27ae05(0x126)),null;let {data:_0x2bcbcc,error:_0xdd6b2a}=await supabase[_0x27ae05(0x160)](_0x27ae05(0x17c))['select']('*')['eq']('user_id',_0x5f6975['id'])['single']();if(_0xdd6b2a){console[_0x27ae05(0x1af)](_0x27ae05(0x12d),_0xdd6b2a?.[_0x27ae05(0x187)]||JSON[_0x27ae05(0x19e)](_0xdd6b2a)),console[_0x27ae05(0x1af)](_0x27ae05(0x14c),{'code':_0xdd6b2a?.[_0x27ae05(0x1ac)],'details':_0xdd6b2a?.['details'],'hint':_0xdd6b2a?.['hint']});if(_0xdd6b2a?.[_0x27ae05(0x187)]?.[_0x27ae05(0x195)]('permission\x20denied'))return console[_0x27ae05(0x15a)]('Permission\x20denied\x20for\x20profiles\x20table,\x20using\x20user\x20metadata'),{'user_id':_0x5f6975['id'],'name':_0x5f6975[_0x27ae05(0x151)]?.['full_name']||_0x5f6975[_0x27ae05(0x1a4)],'email':_0x5f6975[_0x27ae05(0x1a4)],'phone':null,'avatar_url':_0x5f6975[_0x27ae05(0x151)]?.['avatar_url']};return null;}return _0x2bcbcc;}catch(_0x45c3e0){return console[_0x27ae05(0x1af)](_0x27ae05(0x17f),_0x45c3e0),null;}}const logoutBtn=document[_0xddaa1e(0x19c)](_0xddaa1e(0x142));logoutBtn&&logoutBtn[_0xddaa1e(0x158)](_0xddaa1e(0x14b),async()=>{const _0x353c4b=_0xddaa1e;await supabase['auth'][_0x353c4b(0x166)](),window['location'][_0x353c4b(0x19d)]=_0x353c4b(0x186);});async function handleDeleteAccount(){const _0x278197=_0xddaa1e,{data:{user:_0x5416b4},error:_0x109335}=await supabase[_0x278197(0x17e)][_0x278197(0x14e)]();if(_0x109335||!_0x5416b4){alert(_0x278197(0x198));return;}let _0x16ef6e=null;const {data:{session:_0x40daa3},error:_0x38db5d}=await supabase[_0x278197(0x17e)]['getSession']();if(_0x40daa3&&_0x40daa3[_0x278197(0x1a1)])_0x16ef6e=_0x40daa3['access_token'];else try{const _0x9f3fff=localStorage[_0x278197(0x1aa)](_0x278197(0x14d));if(_0x9f3fff){const _0x2d3631=JSON[_0x278197(0x16b)](_0x9f3fff);_0x16ef6e=_0x2d3631[_0x278197(0x1a1)];}}catch(_0x21580f){console['error'](_0x278197(0x19a),_0x21580f);}if(!_0x16ef6e){const _0x4e28ee=localStorage['getItem'](_0x278197(0x14d));if(_0x4e28ee)try{const _0x4eff3d=JSON[_0x278197(0x16b)](_0x4e28ee),_0x568ba6=Date[_0x278197(0x15b)]()>_0x4eff3d[_0x278197(0x157)]*0x3e8;_0x568ba6?alert(_0x278197(0x12e)):alert(_0x278197(0x14a));}catch(_0x3f2a3e){console['error'](_0x278197(0x1a8),_0x3f2a3e),alert(_0x278197(0x14a));}else alert(_0x278197(0x14a));return;}const _0x16b61e=document[_0x278197(0x19c)](_0x278197(0x16c)),_0x5510e6=document[_0x278197(0x19c)](_0x278197(0x12c)),_0x106a79=_0x16b61e[_0x278197(0x177)];_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)]('loading'),_0x16b61e[_0x278197(0x177)]='';_0x5510e6&&_0x5510e6[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x172));try{const _0xd5e1f3=SUPABASE_URL+'/functions/v1/delete-user',_0x3ae686={'user_id':_0x5416b4['id']},_0xe325f9=await fetch(_0xd5e1f3,{'method':'POST','headers':{'Content-Type':'application/json','Authorization':_0x278197(0x14f)+_0x16ef6e},'body':JSON[_0x278197(0x19e)](_0x3ae686)});if(!_0xe325f9['ok']){let _0x569b14=_0x278197(0x196);try{const _0x23cad5=await _0xe325f9[_0x278197(0x124)]();_0x569b14=_0x23cad5[_0x278197(0x1af)]||_0x23cad5[_0x278197(0x187)]||'Unknown\x20error';}catch(_0x2056c2){_0x569b14='HTTP\x20'+_0xe325f9['status']+':\x20'+_0xe325f9[_0x278197(0x169)];}_0x16b61e[_0x278197(0x17d)][_0x278197(0x167)](_0x278197(0x172)),_0x16b61e[_0x278197(0x17d)]['add']('shake-animation'),_0x16b61e[_0x278197(0x177)]=_0x106a79;_0x5510e6&&(_0x5510e6[_0x278197(0x17d)][_0x278197(0x167)](_0x278197(0x172)),_0x5510e6[_0x278197(0x17d)][_0x278197(0x175)]('shake-animation'));setTimeout(()=>{const _0x10e535=_0x278197;_0x16b61e[_0x10e535(0x17d)]['remove']('shake-animation'),_0x5510e6&&_0x5510e6[_0x10e535(0x17d)][_0x10e535(0x167)](_0x10e535(0x141));},0x1f4),showResultModal(![],'Error\x20deleting\x20account:\x20'+_0x569b14);return;}const _0x5dae1c=await _0xe325f9[_0x278197(0x124)]();_0x5dae1c[_0x278197(0x13a)]?(_0x16b61e['classList'][_0x278197(0x167)]('loading'),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x13a)),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x190)),_0x5510e6&&(_0x5510e6[_0x278197(0x17d)]['remove']('loading'),_0x5510e6[_0x278197(0x17d)][_0x278197(0x175)]('success')),setTimeout(()=>{const _0x23b101=_0x278197;showResultModal(!![],_0x23b101(0x18b)),setTimeout(()=>{const _0x5f181f=_0x23b101;supabase[_0x5f181f(0x17e)]['signOut']()[_0x5f181f(0x131)](()=>{const _0x14546e=_0x5f181f;window['location'][_0x14546e(0x19d)]='/';});},0x5dc);},0x320)):(_0x16b61e['classList'][_0x278197(0x167)]('loading'),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x141)),_0x16b61e[_0x278197(0x177)]=_0x106a79,_0x5510e6&&(_0x5510e6[_0x278197(0x17d)]['remove'](_0x278197(0x172)),_0x5510e6[_0x278197(0x17d)]['add']('shake-animation')),setTimeout(()=>{const _0x37788d=_0x278197;_0x16b61e[_0x37788d(0x17d)]['remove']('shake-animation'),_0x5510e6&&_0x5510e6[_0x37788d(0x17d)][_0x37788d(0x167)](_0x37788d(0x141));},0x1f4),showResultModal(![],'Error\x20deleting\x20account:\x20'+(_0x5dae1c[_0x278197(0x1af)]||_0x278197(0x196))));}catch(_0x40a9dd){if(_0x40a9dd['message'][_0x278197(0x195)]('Failed\x20to\x20fetch')){_0x16b61e[_0x278197(0x17d)]['remove'](_0x278197(0x172)),_0x16b61e[_0x278197(0x177)]=_0x106a79,showResultModal(![],_0x278197(0x17a));try{const {error:_0x5c1887}=await supabase[_0x278197(0x160)](_0x278197(0x17c))[_0x278197(0x147)]()['eq']('user_id',_0x5416b4['id']);if(_0x5c1887){showResultModal(![],_0x278197(0x170)+_0x5c1887[_0x278197(0x187)]);return;}await supabase[_0x278197(0x17e)][_0x278197(0x166)](),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)]('success'),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x190)),_0x5510e6&&(_0x5510e6[_0x278197(0x17d)][_0x278197(0x167)](_0x278197(0x172)),_0x5510e6['classList'][_0x278197(0x175)](_0x278197(0x13a))),setTimeout(()=>{showResultModal(!![],'Account\x20deleted\x20successfully'),setTimeout(()=>{const _0x3a4048=_0x5b8c;window['location'][_0x3a4048(0x19d)]='/';},0x5dc);},0x320);}catch(_0x1ac64b){_0x16b61e[_0x278197(0x17d)][_0x278197(0x167)]('loading'),_0x16b61e[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x141)),_0x16b61e[_0x278197(0x177)]=_0x106a79,_0x5510e6&&(_0x5510e6[_0x278197(0x17d)][_0x278197(0x167)](_0x278197(0x172)),_0x5510e6['classList'][_0x278197(0x175)]('shake-animation')),setTimeout(()=>{const _0x1eb79c=_0x278197;_0x16b61e[_0x1eb79c(0x17d)]['remove'](_0x1eb79c(0x141)),_0x5510e6&&_0x5510e6[_0x1eb79c(0x17d)]['remove']('shake-animation');},0x1f4),showResultModal(![],_0x278197(0x1a6));}}else _0x16b61e['classList'][_0x278197(0x167)](_0x278197(0x172)),_0x16b61e[_0x278197(0x17d)]['add']('shake-animation'),_0x16b61e[_0x278197(0x177)]=_0x106a79,_0x5510e6&&(_0x5510e6[_0x278197(0x17d)]['remove'](_0x278197(0x172)),_0x5510e6[_0x278197(0x17d)][_0x278197(0x175)](_0x278197(0x141))),setTimeout(()=>{const _0x473080=_0x278197;_0x16b61e[_0x473080(0x17d)][_0x473080(0x167)](_0x473080(0x141)),_0x5510e6&&_0x5510e6[_0x473080(0x17d)][_0x473080(0x167)](_0x473080(0x141));},0x1f4),showResultModal(![],_0x278197(0x144)+_0x40a9dd['message']);}}document[_0xddaa1e(0x19c)]('confirm-delete-btn')[_0xddaa1e(0x158)](_0xddaa1e(0x14b),handleDeleteAccount),window['addEventListener'](_0xddaa1e(0x1a9),async()=>{getUserAndProfile();});async function getUserId(){const _0x201480=_0xddaa1e;try{const {data:{user:_0x164aed},error:_0x41b04b}=await supabase[_0x201480(0x17e)][_0x201480(0x14e)]();if(_0x41b04b||!_0x164aed)return console[_0x201480(0x15a)](_0x201480(0x126)),null;return _0x164aed['id'];}catch(_0x220cfe){return console[_0x201480(0x1af)](_0x201480(0x16e),_0x220cfe),null;}}async function getUserIdFromSession(){const _0x3dc3d1=_0xddaa1e;try{const {data:{session:_0x43bc48},error:_0x4578d6}=await supabase[_0x3dc3d1(0x17e)][_0x3dc3d1(0x152)]();if(_0x4578d6||!_0x43bc48)return console[_0x3dc3d1(0x15a)]('No\x20session\x20found'),null;return console[_0x3dc3d1(0x15a)](_0x3dc3d1(0x154),_0x43bc48[_0x3dc3d1(0x148)]['id']),_0x43bc48['user']['id'];}catch(_0xfb0830){return console['error'](_0x3dc3d1(0x18f),_0xfb0830),null;}}function getUserIdFromLocalStorage(){const _0x175961=_0xddaa1e;try{const _0x198406=localStorage[_0x175961(0x1aa)](_0x175961(0x14d));if(_0x198406){const _0x5006a7=JSON[_0x175961(0x16b)](_0x198406);return console[_0x175961(0x15a)](_0x175961(0x1a5),_0x5006a7['user']['id']),_0x5006a7[_0x175961(0x148)]['id'];}return null;}catch(_0x58bfbf){return console[_0x175961(0x1af)]('Error\x20getting\x20user\x20ID\x20from\x20localStorage:',_0x58bfbf),null;}}function listenToAuthChanges(){const _0x273e19=_0xddaa1e;supabase['auth'][_0x273e19(0x125)]((_0x15ffa2,_0x5f1d8c)=>{const _0x284d5b=_0x273e19;if(_0x15ffa2===_0x284d5b(0x18e)&&_0x5f1d8c)console[_0x284d5b(0x15a)](_0x284d5b(0x189),_0x5f1d8c[_0x284d5b(0x148)]['id']);else _0x15ffa2===_0x284d5b(0x16a)&&console[_0x284d5b(0x15a)]('User\x20signed\x20out');});}async function getUserPhone(){const _0x169192=_0xddaa1e;try{const {data:{user:_0x290dd1},error:_0x32f5a3}=await supabase['auth']['getUser']();if(_0x32f5a3||!_0x290dd1)return console[_0x169192(0x15a)](_0x169192(0x126)),null;const {data:_0x4d33c9,error:_0xe52e74}=await supabase['from']('profiles')[_0x169192(0x127)]('phone')['eq'](_0x169192(0x159),_0x290dd1['id'])[_0x169192(0x121)]();if(_0xe52e74)return console[_0x169192(0x1af)]('Error\x20getting\x20profile:',_0xe52e74),null;return console[_0x169192(0x15a)]('Phone\x20from\x20profiles:',_0x4d33c9[_0x169192(0x15e)]),_0x4d33c9[_0x169192(0x15e)];}catch(_0x27d225){return console[_0x169192(0x1af)](_0x169192(0x138),_0x27d225),null;}}function _0x316b(){const _0x540227=['Unknown\x20error','SUPABASE_URL','User\x20not\x20found','Edge\x20Function\x20success:','Error\x20reading\x20from\x20localStorage:','full_name','getElementById','href','stringify','2858471DsTJDE','No\x20valid\x20session\x20found','access_token','profile-role-value','authenticated','email','User\x20ID\x20from\x20localStorage:','Both\x20methods\x20failed.\x20Please\x20contact\x20support.','Active','Error\x20checking\x20token\x20expiration:','DOMContentLoaded','getItem','(Google)','code','Missing\x20Supabase\x20environment\x20variables','currentProfile','error','REDIRECT_TO','data','single','10jKgFMu','th-text-warning','json','onAuthStateChange','No\x20user\x20found','select','52PwdTkH','(Database)','10457712qOhUIr','className','mobile-delete-account-btn','Error\x20getting\x20latest\x20profile:','Your\x20session\x20has\x20expired.\x20Please\x20login\x20again.','POST','createClient','then','13909MEyCMf','No\x20user\x20found,\x20redirecting\x20to\x20login','origin','name','Edge\x20Function\x20error:','Error\x20getting\x20user\x20profile:','Error\x20getting\x20phone:','Full\x20profile:','success','18JHPvaT','last_sign_in_at','/login/dashboard.html','Error\x20getting\x20all\x20profiles:','role','328761MjzumJ','shake-animation','logout-btn','user-email','Network\x20error:\x20','52MthMpI','profile-detail-email','delete','user','toLocaleString','No\x20access\x20token\x20found.\x20Please\x20login\x20again.','click','Error\x20details:','sb-tcjxrlsebxdyoohcugsr-auth-token','getUser','Bearer\x20','Failed\x20to\x20update\x20profile','user_metadata','getSession','/functions/v1/update-profiles','User\x20ID\x20from\x20session:','last-login-value','SUPABASE_ANON_KEY','expires_at','addEventListener','user_id','log','now','name-source','supabase','phone','user-avatar','from','created_at','th-text-success','src','phone-source','../img/favicon.png','signOut','remove','ENV','statusText','SIGNED_OUT','parse','confirm-delete-btn','8ZSagmZ','Error\x20getting\x20user\x20ID:','created-at-value','Error\x20deleting\x20profile:\x20','profile-detail-phone','loading','Error\x20refreshing\x20profile\x20data:','No\x20valid\x20session\x20found,\x20redirecting\x20to\x20login','add','profile-detail-name','textContent','Failed\x20to\x20get\x20latest\x20profile\x20data','profile-status','Edge\x20Function\x20unavailable.\x20Trying\x20alternative\x20method...','application/json','profiles','classList','auth','Error\x20getting\x20latest\x20profile\x20data:','Error\x20updating\x20profile\x20via\x20Edge\x20Function:','Error\x20getting\x20all\x20user\x20phones:','8047EhawMn','Error\x20in\x20getUserAndProfile:','not','email-source','/login/','message','50703AaKTeY','User\x20signed\x20in,\x20ID:','Incomplete','Your\x20account\x20has\x20been\x20deleted\x20successfully.','avatar_url','15250CmZMAO','SIGNED_IN','Error\x20getting\x20user\x20ID\x20from\x20session:','success-animation','location','Phone\x20from\x20metadata:','user-name-text','user_id,\x20name,\x20phone,\x20email','includes'];_0x316b=function(){return _0x540227;};return _0x316b();}async function getUserPhoneFromMetadata(){const _0x46104d=_0xddaa1e;try{const {data:{user:_0x1660e8},error:_0x461c9a}=await supabase[_0x46104d(0x17e)]['getUser']();if(_0x461c9a||!_0x1660e8)return null;const _0x1680f8=_0x1660e8[_0x46104d(0x151)]?.['phone'];return console['log'](_0x46104d(0x192),_0x1680f8),_0x1680f8;}catch(_0x10eaeb){return console[_0x46104d(0x1af)]('Error\x20getting\x20phone\x20from\x20metadata:',_0x10eaeb),null;}}async function getUserProfile(){const _0x5aa72c=_0xddaa1e;try{const {data:{user:_0x109194},error:_0x4bdee2}=await supabase[_0x5aa72c(0x17e)]['getUser']();if(_0x4bdee2||!_0x109194)return null;const {data:_0x489862,error:_0x3b03d2}=await supabase[_0x5aa72c(0x160)](_0x5aa72c(0x17c))['select']('*')['eq']('user_id',_0x109194['id'])[_0x5aa72c(0x121)]();if(_0x3b03d2)return console[_0x5aa72c(0x1af)]('Error\x20getting\x20profile:',_0x3b03d2),null;return console[_0x5aa72c(0x15a)](_0x5aa72c(0x139),_0x489862),console[_0x5aa72c(0x15a)]('Phone:',_0x489862['phone']),console['log']('Name:',_0x489862[_0x5aa72c(0x135)]),console[_0x5aa72c(0x15a)]('Email:',_0x489862[_0x5aa72c(0x1a4)]),_0x489862;}catch(_0x51b741){return console[_0x5aa72c(0x1af)](_0x5aa72c(0x137),_0x51b741),null;}}function _0x5b8c(_0x4d1457,_0x483687){const _0x316b96=_0x316b();return _0x5b8c=function(_0x5b8ce2,_0x1b2837){_0x5b8ce2=_0x5b8ce2-0x11f;let _0x2c985c=_0x316b96[_0x5b8ce2];return _0x2c985c;},_0x5b8c(_0x4d1457,_0x483687);}async function getAllUserPhones(){const _0x2b48fe=_0xddaa1e;try{const {data:_0x17b3ee,error:_0x19e3bd}=await supabase[_0x2b48fe(0x160)](_0x2b48fe(0x17c))['select'](_0x2b48fe(0x194))[_0x2b48fe(0x184)](_0x2b48fe(0x15e),'is',null);if(_0x19e3bd)return console['error'](_0x2b48fe(0x13e),_0x19e3bd),null;return console[_0x2b48fe(0x15a)]('All\x20users\x20with\x20phones:',_0x17b3ee),_0x17b3ee;}catch(_0x42c62f){return console[_0x2b48fe(0x1af)](_0x2b48fe(0x181),_0x42c62f),null;}}